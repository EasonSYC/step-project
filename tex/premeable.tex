% Page Format
\usepackage[a4paper,margin=1in]{geometry}

% TOC Format
\usepackage{tocloft}
\renewcommand{\cftchapnumwidth}{3em}
\renewcommand{\cftsecnumwidth}{4em}
\renewcommand{\cftsubsecnumwidth}{5em}

% Header Format
\usepackage{titlesec}
\titleformat{\chapter}[display]{\bfseries\Huge}{}{0em}{}
\titleformat{\section}[block]{\bfseries\Large}{\thechapter}{1em}{}
\titleformat{\subsection}[block]{\bfseries\large}{\thesection}{1em}{}

% TOC
\usepackage{etoc}
\etocsettocdepth{3}

% Headers
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{#1}{}}

\newcommand{\SubOne}[1]{\numexpr#1-1}

\newcommand{\Year}[1]{
    \setcounter{chapter}{\SubOne{#1}}
    \chapter{Year #1}
    \thispagestyle{chapterOnly}
    \localtableofcontents
}
\newcommand{\Paper}[1]{
    \clearpage
    \setcounter{section}{\SubOne{#1}}
    \section{Paper #1}
    \localtableofcontents
}
\newcommand{\Question}[1]{
    \clearpage
    \setcounter{subsection}{\SubOne{#1}}
    \subsection{Question #1}
}

\newcommand{\WorkInProgress}{
    Work in progress.
}

\newcommand{\Title}{STEP Project}
\newcommand{\SubTitle}{A Solution Booklet to STEP questions}
\newcommand{\Author}{Eason Shao}
\newcommand{\Date}{\today}

% Title & Subtitle
\title{\Title}
\author{\Author}
\date{\Date}

% Page Layout
\newcommand{\SetFooter}{
    \renewcommand{\footrulewidth}{0.4pt}
    \lfoot{\Author}
    \rfoot{Page \thepage\space of \pageref*{LastPage}}
}

\fancypagestyle{plain}{
    \fancyhf{}
    \renewcommand{\headrulewidth}{0pt}
    \SetFooter
}

\fancypagestyle{chapterOnly}{
    \fancyhf{}
    \renewcommand{\headrulewidth}{0.4pt}
    \lhead{\Title}
    \rhead{\leftmark}
    \SetFooter
}

\fancypagestyle{fancy}{
    \fancyhf{}
    \renewcommand{\headrulewidth}{0.4pt}
    \lhead{\Title}
    \rhead{\leftmark\space\rightmark}
    \SetFooter
}

% Links
\newcommand{\BasePath}{https://step.easonshao.com/}